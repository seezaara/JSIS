window.JSIS=function(){window.request=F,window.require=U;var e,t,n={},r={},o=-1,i=0,a={},l=T({}),u={},s=new Map,c={},f={selector:"*:not(style,script:not([type='jsis' i]),[\\:if] *,[\\:for] *,[\\:if]+[\\:elseif],[\\:elseif]+[\\:elseif],[\\:elseif] *,[\\:if]+[\\:else],[\\:elseif]+[\\:else],[\\:else] *,[\\:wait] *,[\\:wait]+[\\:then],[\\:catch]+[\\:then],[\\:then] *,[\\:wait]+[\\:catch],[\\:then]+[\\:catch],[\\:catch] *)",text_selector:/\$?{([^}]*?{[^]*?}[^}]*?)}|\$?{([^]*?)}/g,css_selector:/(([^,{}\n]+?)(?=(,.*)?\{[^}]*?\}\s*))(?=([^'\\]*(\\.|'([^'\\]*\\.)*[^'\\]*'))*[^']*$)(?=([^"\\]*(\\.|"([^"\\]*\\.)*[^"\\]*"))*[^"]*$)(?=([^`\\]*(\\.|`([^`\\]*\\.)*[^`\\]*`))*[^`]*$)/g,css_minify:/((\/\*[^*]*\*+([^/][^*]*\*+)*\/)|((\s+(?=[{:};]))|((?<=.+\s*[{:}])\s+))|(;\s*(?=}))|(\s{2,})|(\n\s*)|(\r\n|\n|\r|\t))(?=([^'\\]*(\\.|'([^'\\]*\\.)*[^'\\]*'))*[^']*$)(?=([^"\\]*(\\.|"([^"\\]*\\.)*[^"\\]*"))*[^"]*$)(?=([^`\\]*(\\.|`([^`\\]*\\.)*[^`\\]*`))*[^`]*$)/g,load:":load",attr:":",event:"@",event2:":on",this_test:/[^0-9a-zA-Z_$](this)[^0-9a-zA-Z_$]/,test_loop:/((let|var|const) )? *(([0-9a-zA-Z_$]+)[0-9a-zA-Z_$\[\].'"`]*) *(=|in|of)/,comp_name:"COMP",script_name:"SCRIPT",fake:function(){return""}},d={for:f.attr+"for",if:f.attr+"if",forif:f.attr+"forif",elseif:f.attr+"elseif",else:f.attr+"else",wait:f.attr+"wait",then:f.attr+"then",catch:f.attr+"catch"};function h(e,t){m(e,t);var n=e.querySelectorAll(f.selector);for(let e=0;e<n.length;e++)m(n[e],t)}function m(e,t){if(e.nodeName==f.comp_name)return function(e,t){var n=e.getAttribute(f.attr+"src"),r=e.getAttribute("src"),o=e.getAttribute(f.attr+"prop"),i=null!=e.getAttribute(f.attr+"global");e.removeAttribute("src"),e.removeAttribute(f.attr+"src"),e.removeAttribute(f.attr+"prop"),e.removeAttribute(f.attr+"global");var a=e.getAttributeNames();if(Object.values(d).some((function(t){if(a.includes(t))return console.error("Uncaught SyntaxError: Unexpected token",t,e),!0})))return;for(var l=document.createElement("div"),u=e.attributes.length-1;u>=0;--u)l.attributes.setNamedItem(e.attributes[u].cloneNode());e.parentNode.replaceChild(l,e),e.remove(),null!=n?L(j,n,l,o,i,t):r&&j(r,l,o,i,t,!1)}(e,t);if(e.nodeName==f.script_name&&"JSIS"==e.type.toUpperCase())return function(e,t){return b(e.src?P(e.src,void 0,void 0):e.innerText,"",t)([])}(e,t);var n=e.getAttributeNames().join("");if(n.includes(f.attr)){if(!function(e,t){if(d.if in e.attributes)return void C(e,d.if,t);if(d.for in e.attributes)return void function(e,t,n){var r=e.parentNode,o=e.previousSibling;r.removeChild(e),L(y,g(e,t),e,o,r,n)}(e,e.attributes[d.for],t);if(d.forif in e.attributes)return void C(e,d.forif,t);if(d.else in e.attributes||d.elseif in e.attributes){var n=e.attributes[d.else]||e.attributes[d.elseif];return void console.error("Uncaught SyntaxError: Unexpected token",n.name,"without previous if",e)}if(d.wait in e.attributes)return void function(e,t){var n=e.parentNode,r=n.childNodes,o={wait:w(r,e)},i=e.nextElementSibling;if(i){var a=i.nextElementSibling;if(a)var l=i.attributes[d.then]||a.attributes[d.then],u=i.attributes[d.catch]||a.attributes[d.catch];else l=i.attributes[d.then],u=i.attributes[d.catch]}n.removeChild(e),null!=l&&(l=l.ownerElement,o.then=w(r,l),n.removeChild(l));null!=u&&(u=u.ownerElement,o.catch=w(r,u),n.removeChild(u));L(N,e,l,u,n,o,t)}(e,t);if(d.then in e.attributes||d.catch in e.attributes){n=e.attributes[d.then]||e.attributes[d.catch];return void console.error("Uncaught SyntaxError: Unexpected token",n.name,"without previous wait",e)}return!0}(e,t))return;$(e,t)}else n.includes(f.event)&&$(e,t);!function(e,t){var n=[],r=[],o=[],i=e.childNodes;for(let e=0;e<i.length;e++)if(3==i[e].nodeType&&""!=i[e].data.trim())for(;null!==(datajs=f.text_selector.exec(i[e].data));){var a=document.createRange();a.setStart(i[e],datajs.index),a.setEnd(i[e],f.text_selector.lastIndex),n.unshift(a),r.unshift(datajs[1]||datajs[2]),o.unshift("$"==datajs[0][0])}for(var l in n)H(E,e,r[l],n[l],o[l],t)}(e,t)}function p(e,t,n){try{return Function("_","__","_$","__$","prop",'with(__$){with(_$){with(__){with(_){with(prop){return function(){"use strict";return ('+e+") }}}}}}")(...t)}catch(t){return console.error(t.message,"at:'",e,"'",n),f.fake}}function v(e,t,n){try{return function(e){if(!(e=e.trim()))return!1;var t=e.charCodeAt(0);if(!(36===t||95===t||t>=65&&t<=90||t>=97&&t<=122))return!1;let n=1;for(;n<e.length;){var r=e.charCodeAt(n);if(!(36===r||95===r||r>=65&&r<=90||r>=97&&r<=122||r>=48&&r<=57))return!1;n++}return!0}(e)?Function("_","__","_$","__$","prop","with(__$){with(_$){with(__){with(_){with(prop){return ("+e+") }}}}}")(...t):Function("_","__","_$","__$","prop",'with(__$){with(_$){with(__){with(_){with(prop){return function(event){"use strict";return ('+e+") }}}}}}")(...t)}catch(t){return console.error(t.message,"at:'",e,"'",n),f.fake}}function b(e,t,n){try{return Function("_","__","_$","__$","prop","with(__$){with(_$){with(__){with(_){with(prop){"+e+";return function(){ with(this){ return function(){"+t+"}}}}}}}}")(...n)}catch(e){return console.error(e),f.fake}}function _(e){return new Promise((function(t){try{var n={set exports(e){t(e)}};Function("require","module",'"use strict";'+e).call(data,U,n),t({})}catch(e){console.error(e)}}))}function g(e,t){return e.removeAttributeNode(t),t.value}function w(e,t){return Array.prototype.indexOf.call(e,t)}function y(e,t,n,r,o){null==n&&(n=r.firstChild);var i=[],a=!0;return function(e,t,n){if(f.this_test.test(e))return console.error("Uncaught SyntaxError: Illegal this usage","at:'",e,"'"),f.fake;try{var r=e.match(f.test_loop)[4];return Function("_","__","_$","__$","prop",'with(__$){with(_$){with(__){with(_){with(prop){return function(){"use strict";for('+e+"){this("+r+',"'+r+'")} }}}}}}')(...t)}catch(t){return console.error(t.message,"at:'",e,"'",n),f.fake}}(e,o,t).call((function(e,l){a&&(a=!1,k()),n=r.insertBefore(t.cloneNode(!0),n.nextSibling);var u=[...o];u[4]={...u[4]},u[4][l]=e,i.push(n),h(n,u)})),i}function C(e,t,n){var r=document.createDocumentFragment(),o=e.parentNode,i=o.childNodes,a=e.nextElementSibling,l=[w(i,e)];for(r.appendChild(e);null!=a&&d.elseif in a.attributes;){var u=a.nextElementSibling;l.push(w(i,a)),r.appendChild(a),a=u}null!=a&&d.else in a.attributes&&(l.push(w(i,a)),r.appendChild(a)),L(x,r,l,t,o,n)}function x(e,t,n,r,o){var i=e.cloneNode(!0).children;if(p(g(a=i[0],a.attributes[n]),o,a).call(a))return k(),r.insertBefore(a,r.childNodes[t[0]]),h(a,o),a;k(),i[0].remove();for(let e=0;e<i.length;e++){var a=i[e];if(!(d.elseif in a.attributes))break;if(p(g(a,a.attributes[d.elseif]),o,a).call(a))return r.insertBefore(a,r.childNodes[t[e+1]]),h(a,o),a}return(a=i[i.length-1])&&d.else in a.attributes?(a.removeAttributeNode(a.attributes[d.else]),r.insertBefore(a,r.childNodes[t[t.length-1]]),h(a,o),a):void 0}function N(e,t,n,r,o,i){e=e.cloneNode(!0),null!=t&&(t=t.cloneNode(!0)),null!=n&&(n=n.cloneNode(!0));var a=p(g(e,e.attributes[d.wait]),i,e).call(e);if(k(),r.insertBefore(e,r.childNodes[o.wait]),h(e,i),a instanceof Promise){r=e.parentNode;a.then((function(n){null!=e&&e.remove(),null!=t&&(r.insertBefore(t,r.childNodes[o.then]),i[4]={...i[4]},i[4][g(t,t.attributes[d.then])]=n,h(t,i))}),(function(t){null!=e&&e.remove(),null!=n&&(r.insertBefore(n,r.childNodes[o.catch]),i[4]={...i[4]},i[4][g(n,n.attributes[d.catch])]=t,h(n,i))}))}else null!=e&&e.remove(),null!=t&&(r.insertBefore(t,r.childNodes[o.then]),i[4]={...i[4]},i[4][g(t,t.attributes[d.then])]=a,h(t,i));return function(){let r=!1;return null!=e&&(e.isConnected||(r=!0),e.remove(),e=void 0),null!=t&&(e.isConnected||(r=!0),t.remove(),t=void 0),null!=n&&(e.isConnected||(r=!0),n.remove(),n=void 0),r}}function $(e,t){var n=e.attributes;f.load in n&&function(e,t){p(e.value,t,e.ownerElement).call(e.ownerElement),e.ownerElement.removeAttributeNode(e)}(n[f.load],t);for(let e=0;e<n.length;)A(n[e],t)?n[e].ownerElement.removeAttributeNode(n[e]):e++}function A(e,t){return e.name.substring(0,3)==f.event2?(e.ownerElement.addEventListener(e.name.substring(3),v(e.value,t,e.ownerElement)),!0):e.name[0]==f.event?(e.ownerElement.addEventListener(e.name.substring(1),v(e.value,t,e.ownerElement)),!0):e.name[0]==f.attr&&(H(S,e.value,e.name.substring(1),e.ownerElement,t),!0)}function S(e,t,n,r){if(!n.isConnected)return!0;var o=function(e,t,n){if("object"!=typeof n)return n;if("class"==t){for(var r in n)n[r]?e.classList.add(r):e.classList.remove(r);return null}if("style"==t){for(var r in n)r in e.style&&(e.style[r]=n[r]);return null}for(var r in n)if(n[r])return r;return null}(n,t,p(e,r,n).call(n));k(),null!=o&&n.setAttribute(t,o)}function E(e,t,n,r,o){if(!e.isConnected)return!0;n.deleteContents();var i=p(t,o,e).call(e);if(k(),r){var a=n.createContextualFragment(i);!function(e,t){for(let n=0;n<e.length;n++)h(e[n],t)}(a.children,o),n.insertNode(a)}else n.insertNode(document.createTextNode(i))}function j(e,t,u,s,c,d=!0){d&&(e=p(e,c,t).call(t),k()),null!=u?"string"==typeof u&&(u=p(u,c,t).call(t)||{}):u={},s?(c=c.slice(0,4))[4]=u:c=[{},T({}),a,l,u];var m,v,_="comp"+Math.floor(1e7*Math.random());t.setAttribute("data-id",_),F(e).then((m=function(e){t.innerHTML="";var n=document.createElement("div");n.innerHTML=e;var r=n.querySelector("template");r?function(e,t,n){var r=e.querySelectorAll("script"),o=e.querySelectorAll("style"),i=function(e,t){var n=0,r=[],o=[],i=[];return{before_load:function(a,l){r[a]=l,++n==t&&e(r.join("\n"),o.join("\n"),i.join(""))},after_load:function(a,l){o[a]=l,++n==t&&e(r.join("\n"),o.join("\n"),i.join(""))},styles:function(a,l,u){i[l]=u,++n==t&&e(r.join("\n"),o.join("\n"),i.join(""))}}}(n,r.length+o.length);for(let e=0;e<r.length;e++)r[e].src?F(r[e].src).then(r[e].hasAttribute(f.attr+"ready")?i.after_load.bind(null,e):i.before_load.bind(null,e)):r[e].hasAttribute(f.attr+"ready")?i.after_load(e,r[e].innerText):i.before_load(e,r[e].innerText);for(let e=0;e<o.length;e++){var a=null==o[e].getAttribute(f.attr+"global");a&&(a=t),o[e].hasAttribute("src")?F(o[e].getAttribute("src")).then(i.styles.bind(null,a,e)):i.styles(a,e,o[e].innerText)}}(n,"div[data-id="+_+"]",(function(e,n,o){if(""!=o){var i=document.createElement("style");i.innerHTML=o,t.appendChild(i)}var a=b(e,n,c);t.appendChild(r.content),h(t,c);var l=function(e){var t=e.querySelectorAll("[id]"),n={};for(let e=0;e<t.length;e++)n[t[e].id]=t[e];return n}(t);a.call(l)()})):console.error('Cannot find "template" in component')},v=++o,n[o]=m,function(e){if(v==i)for(n[v](e),delete n[v],i++;i in r;)r[i].fun(r[i].data),delete r[i],i++;else delete n[v],r[v]={fun:m,data:e}}))}function T(e){return new Proxy(e,{get:q,set:M})}function q(n,r){if("string"==typeof r&&void 0!==e){if(r in u||(u[r]=[]),void 0!==t)s.has(r)||s.set(r,new WeakMap),s.get(r).set(e,t);u[r].push(e)}return n[r]}function M(e,t,n){return e[t]=n,"string"==typeof t&&t in u&&function(e,t){if(t)for(let o=0;o<e.length;o++){var n=e[o],r=t.get(n);r?R(c[r])?(e.splice(o,1),o--,delete c[r]):c[r]=n():n()&&(e.splice(o,1),o--)}else for(let t=0;t<e.length;t++)e[t]()&&(e.splice(t,1),t--)}(u[t],s.get(t)),!0}function R(e){if(!e)return!0;let t=!1;if("object"==typeof e&&e.length)for(let n=0;n<e.length;n++)e[n]&&e[n].isConnected||(t=!0),e[n].remove&&e[n].remove();else{if("function"==typeof e)return e();e.remove&&(e.isConnected||(t=!0),e.remove())}return t}function H(t){(e=t.bind.apply(t,arguments))(!0)}function L(n){var r=Math.floor(1e7*Math.random());t=r,e=n.bind.apply(n,arguments),c[r]=e(!0)}function k(){null!=e&&(e=void 0,t=void 0)}function F(e,t,n){return null==n&&(n={}),null==t?n.method||(n.method="get"):"object"!=typeof t||t instanceof FormData||(t=new URLSearchParams(t)),n.method||(n.method="post"),new Promise((function(r){var o=new XMLHttpRequest;o.onreadystatechange=function(){4==this.readyState&&r(this.response)},n.responseType&&(o.responseType=n.responseType),o.onerror=n.onerror,o.onabort=n.onerror,o.ontimeout=n.onerror,o.onprogress=n.ondownload,o.upload.onprogress=n.onupload,o.open(n.method,e,!0),(null!=n.cache?n.cache:"post"==n.method)?o.setRequestHeader("Cache-Control","public, max-age=604800, immutable"):(o.setRequestHeader("Cache-Control","no-cache, no-store, max-age=0"),o.setRequestHeader("Expires","Tue, 01 Jan 1980 1:00:00 GMT"),o.setRequestHeader("Pragma","no-cache")),o.send(t)}))}function P(e,t,n){null==n&&(n={}),null==t?n.method||(n.method="get"):"object"!=typeof t||t instanceof FormData||(t=new URLSearchParams(t)),n.method||(n.method="post");var r=new XMLHttpRequest;if(n.responseType&&(r.responseType=n.responseType),r.onerror=n.onerror,r.onabort=n.onerror,r.ontimeout=n.onerror,r.onprogress=n.ondownload,r.upload.onprogress=n.onupload,r.open(n.method,e,!1),(null!=n.cache?n.cache:"post"==n.method)?r.setRequestHeader("Cache-Control","public, max-age=604800, immutable"):(r.setRequestHeader("Cache-Control","no-cache, no-store, max-age=0"),r.setRequestHeader("Expires","Tue, 01 Jan 1980 1:00:00 GMT"),r.setRequestHeader("Pragma","no-cache")),r.send(t),4==r.readyState)return r.response}function U(e){return P(e).then(_)}function B(e,t){if(null!=t||e instanceof Element||(t=e,e=document.querySelector("*[JSIS]")))return e?void h(e,[{},T({}),a,l,t||{}]):console.error('Cannot find "JSIS" element in document')}return"complete"===document.readyState||"interactive"===document.readyState?B():document.addEventListener("DOMContentLoaded",(function(){B()})),{component:function(e,t,n={},r={}){j(e,t,n,!r,r,!1)},create:B}}();
