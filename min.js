window.Jsis=function(){window.request=H,window.require=P;var e,t={},n={},r=-1,i=0,o={},a=T({}),l=[],s={},u=new Map,c={},f={selector:"*:not(style,script:not([type='jsis' i]),[\\:if] *,[\\:for] *,[\\:if]+[\\:elseif],[\\:elseif]+[\\:elseif],[\\:elseif] *,[\\:if]+[\\:else],[\\:elseif]+[\\:else],[\\:else] *,[\\:wait] *,[\\:wait]+[\\:then],[\\:catch]+[\\:then],[\\:then] *,[\\:wait]+[\\:catch],[\\:then]+[\\:catch],[\\:catch] *)",text_selector:/\$?{([^}]*?{[^]*?}[^}]*?)}|\$?{([^]*?)}/g,css_selector:/(([^,{}\n]+?)(?=(,.*)?\{[^}]*?\}\s*))(?=([^'\\]*(\\.|'([^'\\]*\\.)*[^'\\]*'))*[^']*$)(?=([^"\\]*(\\.|"([^"\\]*\\.)*[^"\\]*"))*[^"]*$)(?=([^`\\]*(\\.|`([^`\\]*\\.)*[^`\\]*`))*[^`]*$)/g,css_minify:/((\/\*[^*]*\*+([^/][^*]*\*+)*\/)|((\s+(?=[{:};]))|((?<=.+\s*[{:}])\s+))|(;\s*(?=}))|(\s{2,})|(\n\s*)|(\r\n|\n|\r|\t))(?=([^'\\]*(\\.|'([^'\\]*\\.)*[^'\\]*'))*[^']*$)(?=([^"\\]*(\\.|"([^"\\]*\\.)*[^"\\]*"))*[^"]*$)(?=([^`\\]*(\\.|`([^`\\]*\\.)*[^`\\]*`))*[^`]*$)/g,load:":load",attr:":",event:"@",event2:":on",this_test:/[^0-9a-zA-Z_$](this)[^0-9a-zA-Z_$]/,test_loop:/((let|var|const) )? *(([0-9a-zA-Z_$]+)[0-9a-zA-Z_$\[\].'"`]*) *(=|in|of)/,comp_name:"COMP",script_name:"SCRIPT",fake:function(){return""}},d={for:f.attr+"for",if:f.attr+"if",forif:f.attr+"forif",elseif:f.attr+"elseif",else:f.attr+"else",wait:f.attr+"wait",then:f.attr+"then",catch:f.attr+"catch"};function h(e,t){m(e,t);var n=e.querySelectorAll(f.selector);for(let e=0;e<n.length;e++)m(n[e],t)}function m(e,t){if(e.nodeName==f.comp_name)return function(e,t){var n=e.getAttribute(f.attr+"src"),r=e.getAttribute("src"),i=e.getAttribute(f.attr+"prop"),o=null!=e.getAttribute(f.attr+"global");e.removeAttribute("src"),e.removeAttribute(f.attr+"src"),e.removeAttribute(f.attr+"prop"),e.removeAttribute(f.attr+"scoped");for(var a=document.createElement("div"),l=e.attributes.length-1;l>=0;--l)a.attributes.setNamedItem(e.attributes[l].cloneNode());e.parentNode.replaceChild(a,e),e.remove(),null!=n?B(j,n,a,i,o,t):r&&j(r,a,i,o,t,!1)}(e,t);if(e.nodeName==f.script_name&&"JSIS"==e.type.toUpperCase())return function(e,t){return b(e.innerText,"",t)([])}(e,t);var n=e.getAttributeNames().join("");if(n.includes(f.attr)){if(!function(e,t){if(d.if in e.attributes)return void N(e,d.if,t);if(d.for in e.attributes)return void function(e,t,n){var r=e.parentNode,i=e.previousSibling;r.removeChild(e),B(y,g(e,t),e,i,r,n)}(e,e.attributes[d.for],t);if(d.forif in e.attributes)return void N(e,d.forif,t);if(d.else in e.attributes||d.elseif in e.attributes){var n=e.attributes[d.else]||e.attributes[d.elseif];return void console.error("Uncaught SyntaxError: Unexpected token",n.name,"without previous if",e)}if(d.wait in e.attributes)return void function(e,t){var n=e.parentNode,r=n.childNodes,i={wait:w(r,e)},o=e.nextElementSibling;if(o){var a=o.nextElementSibling;if(a)var l=o.attributes[d.then]||a.attributes[d.then],s=o.attributes[d.catch]||a.attributes[d.catch];else l=o.attributes[d.then],s=o.attributes[d.catch]}n.removeChild(e),null!=l&&(l=l.ownerElement,i.then=w(r,l),n.removeChild(l));null!=s&&(s=s.ownerElement,i.catch=w(r,s),n.removeChild(s));B(A,e,l,s,n,i,t)}(e,t);if(d.then in e.attributes||d.catch in e.attributes){n=e.attributes[d.then]||e.attributes[d.catch];return void console.error("Uncaught SyntaxError: Unexpected token",n.name,"without previous wait",e)}return!0}(e,t))return;x(e,t)}else n.includes(f.event)&&x(e,t);!function(e,t){var n=[],r=[],i=[],o=e.childNodes;for(let e=0;e<o.length;e++)if(3==o[e].nodeType&&""!=o[e].data.trim())for(;null!==(datajs=f.text_selector.exec(o[e].data));){var a=document.createRange();a.setStart(o[e],datajs.index),a.setEnd(o[e],f.text_selector.lastIndex),n.unshift(a),r.unshift(datajs[1]||datajs[2]),i.unshift("$"==datajs[0][0])}for(var l in n)k(C,e,r[l],n[l],i[l],t)}(e,t)}function p(e,t,n){try{return Function("_","__","_$","__$","prop",'with(__$){with(_$){with(__){with(_){with(prop){return function(){"use strict";return ('+e+") }}}}}}")(...t)}catch(t){return console.error(t.message,"at:'",e,"'",n),f.fake}}function v(e,t,n){try{return Function("_","__","_$","__$","prop",'with(__$){with(_$){with(__){with(_){with(prop){return function(event){"use strict";return ('+e+") }}}}}}")(...t)}catch(t){return console.error(t.message,"at:'",e,"'",n),f.fake}}function b(e,t,n){try{return Function("_","__","_$","__$","prop","with(__$){with(_$){with(__){with(_){with(prop){"+e+";return function(){ with(this){ return function(){"+t+"}}}}}}}}")(...n)}catch(e){return console.error(e),f.fake}}function _(e){return new Promise((function(t){try{var n={set exports(e){t(e)}};Function("require","module",'"use strict";'+e).call(data,P,n),t({})}catch(e){console.error(e)}}))}function g(e,t){return e.removeAttributeNode(t),t.value}function w(e,t){return Array.prototype.indexOf.call(e,t)}function y(e,t,n,r,i){null==n&&(n=r.firstChild);var o=[],a=!0;return function(e,t,n){if(f.this_test.test(e))return console.error("Uncaught SyntaxError: Illegal this usage","at:'",e,"'"),f.fake;try{var r=e.match(f.test_loop)[4];return Function("_","__","_$","__$","prop",'with(__$){with(_$){with(__){with(_){with(prop){return function(){"use strict";for('+e+"){this("+r+',"'+r+'")} }}}}}}')(...t)}catch(t){return console.error(t.message,"at:'",e,"'",n),f.fake}}(e,i,t).call((function(e,l){a&&(a=!1,F()),n=r.insertBefore(t.cloneNode(!0),n.nextSibling);const s=[...i];s[4]={...s[4]},s[4][l]=e,o.push(n),h(n,s)})),o}function N(e,t,n){var r=document.createDocumentFragment(),i=e.parentNode,o=i.childNodes,a=e.nextElementSibling,l=[w(o,e)];for(r.appendChild(e);null!=a&&d.elseif in a.attributes;){var s=a.nextElementSibling;l.push(w(o,a)),r.appendChild(a),a=s}null!=a&&d.else in a.attributes&&(l.push(w(o,a)),r.appendChild(a)),B($,r,l,t,i,n)}function $(e,t,n,r,i){var o=e.cloneNode(!0).children;if(p(g(a=o[0],a.attributes[n]),i,a).call(a))return F(),r.insertBefore(a,r.childNodes[t[0]]),h(a,i),a;F(),o[0].remove();for(let e=0;e<o.length;e++){var a=o[e];if(!(d.elseif in a.attributes))break;if(p(g(a,a.attributes[d.elseif]),i,a).call(a))return r.insertBefore(a,r.childNodes[t[e+1]]),h(a,i),a}return(a=o[o.length-1])&&d.else in a.attributes?(a.removeAttributeNode(a.attributes[d.else]),r.insertBefore(a,r.childNodes[t[t.length-1]]),h(a,i),a):void 0}function A(e,t,n,r,i,o){e=e.cloneNode(!0),null!=t&&(t=t.cloneNode(!0)),null!=n&&(n=n.cloneNode(!0));var a=p(g(e,e.attributes[d.wait]),o,e).call(e);if(F(),r.insertBefore(e,r.childNodes[i.wait]),h(e,o),a instanceof Promise){r=e.parentNode;a.then((function(n){null!=e&&e.remove(),null!=t&&(r.insertBefore(t,r.childNodes[i.then]),o[4]={...o[4]},o[4][g(t,t.attributes[d.then])]=n,h(t,o))}),(function(t){null!=e&&e.remove(),null!=n&&(r.insertBefore(n,r.childNodes[i.catch]),o[4]={...o[4]},o[4][g(n,n.attributes[d.catch])]=t,h(n,o))}))}else null!=e&&e.remove(),null!=t&&(r.insertBefore(t,r.childNodes[i.then]),o[4]={...o[4]},o[4][g(t,t.attributes[d.then])]=a,h(t,o));return function(){null!=e&&(e.remove(),e=void 0),null!=t&&(t.remove(),t=void 0),null!=n&&(n.remove(),n=void 0)}}function x(e,t){var n=e.attributes;f.load in n&&function(e,t){p(e.value,t,e.ownerElement).call(e.ownerElement),e.ownerElement.removeAttributeNode(e)}(n[f.load],t);for(let e=0;e<n.length;)E(n[e],t)?n[e].ownerElement.removeAttributeNode(n[e]):e++}function E(e,t){return e.name.substring(0,3)==f.event2?(e.ownerElement.addEventListener(e.name.substring(3),v(e.value,t,e.ownerElement)),!0):e.name[0]==f.event?(e.ownerElement.addEventListener(e.name.substring(1),v(e.value,t,e.ownerElement)),!0):e.name[0]==f.attr&&(k(S,e.value,e.name.substring(1),e.ownerElement,t),!0)}function S(e,t,n,r){if(!n.isConnected)return!0;var i=function(e,t,n){if("object"!=typeof n)return n;if("class"==t){for(var r in n)n[r]?e.classList.add(r):e.classList.remove(r);return null}if("style"==t){for(var r in n)r in e.style&&(e.style[r]=n[r]);return null}for(var r in n)if(n[r])return r;return null}(n,t,p(e,r,n).call(n));F(),null!=i&&n.setAttribute(t,i)}function C(e,t,n,r,i){if(!e.isConnected)return!0;n.deleteContents();var o=p(t,i,e).call(e);if(F(),r){var a=n.createContextualFragment(o);!function(e,t){for(let n=0;n<e.length;n++)h(e[n],t)}(a.children,i),n.insertNode(a)}else n.insertNode(document.createTextNode(o))}function j(e,l,s,u,c,d=!0){d&&(e=p(e,c,l).call(l),F()),s=null!=s&&p(s,c,l).call(l)||{},u?(c=c.slice(0,4))[4]=s:c=[{},T({}),o,a,s];var m,v,_="comp"+Math.floor(1e7*Math.random());l.setAttribute("data-id",_),H(e).then((m=function(e){l.innerHTML="";var t=document.createElement("div");t.innerHTML=e;var n=t.querySelector("template");n?function(e,t,n){var r=e.querySelectorAll("script"),i=e.querySelectorAll("style"),o=function(e,t){var n=0,r=[],i=[],o=[];return{before_load:function(a,l){r[a]=l,++n==t&&e(r.join("\n"),i.join("\n"),o.join(""))},after_load:function(a,l){i[a]=l,++n==t&&e(r.join("\n"),i.join("\n"),o.join(""))},styles:function(a,l,s){o[l]=a?s.replace(f.css_minify,"").replace(f.css_selector,a+" $1"):s.replace(f.css_minify,""),++n==t&&e(r.join("\n"),i.join("\n"),o.join(""))}}}(n,r.length+i.length);for(let e=0;e<r.length;e++)r[e].src?H(r[e].src).then(r[e].hasAttribute(f.attr+"ready")?o.after_load.bind(null,e):o.before_load.bind(null,e)):r[e].hasAttribute(f.attr+"ready")?o.after_load(e,r[e].innerText):o.before_load(e,r[e].innerText);for(let e=0;e<i.length;e++){var a=i[e].getAttribute(f.attr+"scoped");""===a&&(a=t),i[e].hasAttribute("src")?H(i[e].getAttribute("src")).then(o.styles.bind(null,a,e)):o.styles(a,e,i[e].innerText)}}(t,"div[data-id="+_+"]",(function(e,t,r){if(""!=r){var i=document.createElement("style");i.innerHTML=r,l.appendChild(i)}var o=b(e,t,c);l.appendChild(n.content),h(l,c);var a=function(e){var t=e.querySelectorAll("[id]"),n={};for(let e=0;e<t.length;e++)n[t[e].id]=t[e];return n}(l);o.call(a)()})):console.error('Cannot find "template" in component')},v=++r,t[r]=m,function(e){if(v==i)for(t[v](e),delete t[v],i++;i in n;)n[i].fun(n[i].data),delete n[i],i++;else delete t[v],n[v]={fun:m,data:e}}))}function T(e){return new Proxy(e,{get:q,set:M})}function q(t,n){if("string"==typeof n&&void 0!==l){if(n in s||(s[n]=[]),void 0!==e){u.has(n)||u.set(n,new Map);u.get(n).set(l,e)}s[n].push(l)}return t[n]}function M(e,t,n){return e[t]=n,"string"==typeof t&&t in s&&function(e,t){if(t)for(let n=0;n<e.length;n++){const r=e[n],i=t.get(r);i?(L(c[i]),c[i]=r()):r()&&(e.splice(n,1),n--)}else for(let t=0;t<e.length;t++)e[t]()&&(e.splice(t,1),t--)}(s[t],u.get(t)),!0}function L(e){if(e)if("object"==typeof e&&e.length)for(let t=0;t<e.length;t++)e[t].remove&&e[t].remove();else"function"==typeof e?e():e.remove&&e.remove()}function k(e){(l=e.bind.apply(e,arguments))(!0)}function B(t){var n=Math.floor(1e7*Math.random());e=n,l=t.bind.apply(t,arguments),c[n]=l(!0)}function F(){null!=l&&(l=void 0,e=void 0)}function H(e,t,n){return null==n&&(n={}),null==t?n.method||(n.method="get"):"object"!=typeof t||t instanceof FormData||(t=new URLSearchParams(t)),n.method||(n.method="post"),new Promise((function(r){var i=new XMLHttpRequest;i.onreadystatechange=function(){4==this.readyState&&r(this.response)},n.responseType&&(i.responseType=n.responseType),i.onerror=n.onerror,i.onabort=n.onerror,i.ontimeout=n.onerror,i.onprogress=n.ondownload,i.upload.onprogress=n.onupload,i.open(n.method,e,!0),(null!=n.cache?n.cache:"post"==n.method)?i.setRequestHeader("Cache-Control","public, max-age=604800, immutable"):(i.setRequestHeader("Cache-Control","no-cache, no-store, max-age=0"),i.setRequestHeader("Expires","Tue, 01 Jan 1980 1:00:00 GMT"),i.setRequestHeader("Pragma","no-cache")),i.send(t)}))}function P(e){return H(e).then(_)}function R(e,t){if(null!=t||e instanceof Element||(t=e,e=document.querySelector("*[JSIS]")))return e?void h(e,[{},T({}),o,a,t||{}]):console.error('Cannot find "JSIS" element in document')}return"complete"===document.readyState||"interactive"===document.readyState?R():document.addEventListener("DOMContentLoaded",(function(){R()})),{create:R}}();
